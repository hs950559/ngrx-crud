(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{lXdu:function(t,e,o){"use strict";o.r(e),o.d(e,"BooksModule",(function(){return P}));var c=o("ofXK"),i=o("tyNb"),n=o("ot8U"),b=o("3Pt+"),r=o("0IaG"),s=o("fXoL"),a=o("G5s2");let d=(()=>{class t extends a.b{constructor(t){super("Book",t)}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(a.c))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac}),t})();var l=o("bTqV"),u=o("kmnG"),p=o("qFsG"),h=o("Xa2L");function f(t,e){1&t&&(s.Ub(0,"div",9),s.Pb(1,"mat-spinner"),s.Tb())}function m(t,e){1&t&&(s.Sb(0),s.Ub(1,"mat-form-field"),s.Pb(2,"input",10),s.Tb(),s.Rb())}function k(t,e){if(1&t&&(s.Sb(0),s.wc(1,f,2,0,"div",4),s.gc(2,"async"),s.Sb(3,5),s.Ub(4,"mat-form-field"),s.Pb(5,"input",6),s.Tb(),s.Ub(6,"mat-form-field"),s.Pb(7,"input",7),s.Tb(),s.Ub(8,"mat-form-field"),s.Pb(9,"input",8),s.Tb(),s.wc(10,m,3,0,"ng-container",1),s.Rb(),s.Rb()),2&t){const t=s.fc();s.Cb(1),s.kc("ngIf",s.hc(2,3,t.loading$)),s.Cb(2),s.kc("formGroup",t.form),s.Cb(7),s.kc("ngIf","update"==t.mode)}}let g=(()=>{class t{constructor(t,e,o,c){this.fb=t,this.dialogRef=e,this.booksService=c,this.book=o.book,this.mode=o.mode}ngOnInit(){this.dialogTitle="create"===this.mode?"Add Book":"Update Book";const t={name:["",b.m.required],author:[""],price:[""],publishedDate:[new Date]};"update"===this.mode?(this.form=this.fb.group(t),this.form.patchValue(Object.assign({},this.book))):"create"===this.mode&&(this.form=this.fb.group(Object.assign({},t)))}onClose(){this.dialogRef.close()}onSave(){const t=Object.assign(Object.assign({},this.book),this.form.value);"update"===this.mode?(this.booksService.update(t),this.dialogRef.close()):"create"===this.mode&&this.booksService.add(t).subscribe(t=>{console.log("New Book",t),this.dialogRef.close()})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(b.c),s.Ob(r.g),s.Ob(r.a),s.Ob(d))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-edit-book-dialog"]],decls:10,vars:5,consts:[[1,"border-bottom","pb-2","mb-3"],[4,"ngIf"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","spinner-container",4,"ngIf"],[3,"formGroup"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Author","formControlName","author"],["matInput","","placeholder","Price","formControlName","price"],[1,"spinner-container"],["matInput","","placeholder","Published Date","formControlName","publishedDate","readonly",""]],template:function(t,e){1&t&&(s.Ub(0,"h2",0),s.xc(1),s.Tb(),s.Ub(2,"mat-dialog-content"),s.wc(3,k,11,5,"ng-container",1),s.Tb(),s.Ub(4,"mat-dialog-actions"),s.Ub(5,"button",2),s.cc("click",(function(){return e.onClose()})),s.xc(6," Close "),s.Tb(),s.Ub(7,"button",3),s.cc("click",(function(){return e.onSave()})),s.gc(8,"async"),s.xc(9," Save "),s.Tb(),s.Tb()),2&t&&(s.Cb(1),s.yc(e.dialogTitle),s.Cb(2),s.kc("ngIf",e.form),s.Cb(4),s.kc("disabled",!(null!=e.form&&e.form.valid)||s.hc(8,3,e.loading$)))},directives:[r.e,c.l,r.c,l.a,b.j,b.e,u.b,p.a,b.b,b.i,b.d,h.b],pipes:[c.b],styles:[""]}),t})();var v=o("NFeN");const U=function(t){return["/books",t]};function T(t,e){if(1&t){const t=s.Vb();s.Ub(0,"tr"),s.Ub(1,"td"),s.xc(2),s.Tb(),s.Ub(3,"td"),s.Ub(4,"a",7),s.xc(5),s.Tb(),s.Tb(),s.Ub(6,"td"),s.xc(7),s.Tb(),s.Ub(8,"td"),s.xc(9),s.Tb(),s.Ub(10,"td"),s.xc(11),s.Tb(),s.Ub(12,"td"),s.Ub(13,"button",8),s.cc("click",(function(){s.qc(t);const o=e.$implicit;return s.fc().editBook(o)})),s.Ub(14,"mat-icon"),s.xc(15,"edit"),s.Tb(),s.Tb(),s.Ub(16,"button",9),s.cc("click",(function(){s.qc(t);const o=e.$implicit;return s.fc().removeBook(o)})),s.Ub(17,"mat-icon"),s.xc(18,"remove"),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=e.$implicit;s.Cb(2),s.yc(t._id),s.Cb(2),s.kc("routerLink",s.mc(6,U,t._id)),s.Cb(1),s.yc(t.name),s.Cb(2),s.yc(t.author),s.Cb(2),s.yc(t.price),s.Cb(2),s.yc(t.publishedDate)}}let y=(()=>{class t{constructor(t,e){this.dialog=t,this.booksService=e}ngOnInit(){this.books$=this.booksService.entities$}removeBook(t){this.booksService.delete(t)}editBook(t){const e=Object(n.a)();e.data={dialogTitle:"Edit Course",book:t,mode:"update"},this.dialog.open(g,e).afterClosed().subscribe()}addBook(){const t=Object(n.a)();t.data={dialogTitle:"Create Book",mode:"create"},this.dialog.open(g,t)}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(r.b),s.Ob(d))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-books"]],decls:24,vars:3,consts:[[1,"header","d-flex","justify-content-between"],[1,"h1"],[1,"btn","btn-info",3,"click"],[1,"table","table-bordered"],[1,"thead-light"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.xc(2,"All Books"),s.Tb(),s.Ub(3,"button",2),s.cc("click",(function(){return e.addBook()})),s.Ub(4,"mat-icon"),s.xc(5,"add"),s.Tb(),s.Tb(),s.Tb(),s.Ub(6,"table",3),s.Ub(7,"thead",4),s.Ub(8,"tr"),s.Ub(9,"th",5),s.xc(10,"#"),s.Tb(),s.Ub(11,"th",5),s.xc(12,"Name"),s.Tb(),s.Ub(13,"th",5),s.xc(14,"Author"),s.Tb(),s.Ub(15,"th",5),s.xc(16,"Price"),s.Tb(),s.Ub(17,"th",5),s.xc(18,"Published Date"),s.Tb(),s.Ub(19,"th",5),s.xc(20,"Actions"),s.Tb(),s.Tb(),s.Tb(),s.Ub(21,"tbody"),s.wc(22,T,19,8,"tr",6),s.gc(23,"async"),s.Tb(),s.Tb()),2&t&&(s.Cb(22),s.kc("ngForOf",s.hc(23,1,e.books$)))},directives:[v.a,c.k,i.i],pipes:[c.b],styles:[""]}),t})();var x=o("lJxs");function O(t,e){if(1&t&&(s.Sb(0),s.Ub(1,"div",1),s.Ub(2,"h1",2),s.xc(3," Book "),s.Ub(4,"em"),s.xc(5),s.Tb(),s.xc(6," Info "),s.Tb(),s.Ub(7,"pre"),s.xc(8),s.gc(9,"json"),s.Tb(),s.Tb(),s.Rb()),2&t){const t=e.ngIf;s.Cb(5),s.yc(t.name),s.Cb(3),s.yc(s.hc(9,2,t))}}let S=(()=>{class t{constructor(t,e){this.route=t,this.booksService=e}ngOnInit(){const t=this.route.snapshot.paramMap.get("bookId");console.log(t,"HERRE"),this.book$=this.booksService.entities$.pipe(Object(x.a)(e=>e.find(e=>e._id===t)))}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(i.a),s.Ob(d))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-book"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"card","card-body"],[1,"text-center"]],template:function(t,e){1&t&&(s.wc(0,O,10,4,"ng-container",0),s.gc(1,"async")),2&t&&s.kc("ngIf",s.hc(1,1,e.book$))},directives:[c.l],pipes:[c.b,c.f],styles:[""]}),t})();var C=o("vkgz"),I=o("pLZG"),w=o("SxV6");let B=(()=>{class t{constructor(t){this.booksService=t}resolve(t,e){return this.booksService.loaded$.pipe(Object(C.a)(t=>{t||this.booksService.getAll()}),Object(I.a)(t=>!!t),Object(w.a)())}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(d))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const j=[{path:"",component:y,resolve:{courses:B}},{path:":bookId",component:S}];let R=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(j)],i.j]}),t})();var $=o("tk/3");let A=(()=>{class t extends a.a{constructor(t,e){super("Book",t,e),this.BASE_URL="https://hkauthapi.herokuapp.com/books/"}getAll(){return this.http.get(this.BASE_URL).pipe(Object(x.a)(t=>t))}add(t){return this.http.post(`${this.BASE_URL}`,t).pipe(Object(x.a)(t=>t))}update(t){return this.http.put(`${this.BASE_URL}/${t.id}`,t.changes).pipe(Object(x.a)(t=>t))}delete(t){return this.http.delete(this.BASE_URL+t).pipe(Object(x.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(s.Yb($.a),s.Yb(a.g))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac}),t})();var L=o("5dmV");const N={Book:{selectId:t=>null==t?void 0:t._id,entityDispatcherOptions:{optimisticUpdate:!0}}};let P=(()=>{class t{constructor(t,e,o){this.eds=t,this.entityDataService=e,this.booksDataService=o,t.registerMetadataMap(N),e.registerService("Book",o)}}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)(s.Yb(a.f),s.Yb(a.e),s.Yb(A))},providers:[B,d,A],imports:[[c.c,b.l,R,L.a]]}),t})()}}]);