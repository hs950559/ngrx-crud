(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"sU/i":function(e,t,c){"use strict";c.r(t),c.d(t,"CoursesModule",(function(){return Q}));var o=c("ofXK"),s=c("tyNb"),r=c("lJxs"),n=c("ot8U"),i=c("3Pt+"),a=c("0IaG"),l=c("fXoL"),b=c("G5s2");let u=(()=>{class e extends b.b{constructor(e){super("Course",e)}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(b.c))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac}),e})();var d=c("bTqV"),m=c("kmnG"),p=c("qFsG"),f=c("d3UM"),h=c("FKr1"),g=c("1jcm");function C(e,t){1&e&&(l.Sb(0),l.Ub(1,"mat-form-field"),l.Pb(2,"input",12),l.Tb(),l.Ub(3,"mat-form-field"),l.Pb(4,"input",13),l.Tb(),l.Rb())}function v(e,t){if(1&e&&(l.Sb(0),l.Sb(1,4),l.Ub(2,"mat-form-field"),l.Pb(3,"input",5),l.Tb(),l.wc(4,C,5,0,"ng-container",1),l.Ub(5,"mat-form-field"),l.Ub(6,"mat-select",6),l.Ub(7,"mat-option",7),l.xc(8," Beginner"),l.Tb(),l.Ub(9,"mat-option",8),l.xc(10," Intermediate"),l.Tb(),l.Ub(11,"mat-option",9),l.xc(12," Advanced"),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"mat-slide-toggle",10),l.xc(14,"Promotion On"),l.Tb(),l.Ub(15,"mat-form-field"),l.Ub(16,"textarea",11),l.xc(17,"        "),l.Tb(),l.Tb(),l.Rb(),l.Rb()),2&e){const e=l.fc();l.Cb(1),l.kc("formGroup",e.form),l.Cb(3),l.kc("ngIf","create"==e.mode)}}let U=(()=>{class e{constructor(e,t,c,o){this.fb=e,this.dialogRef=t,this.coursesService=o,this.dialogTitle=c.dialogTitle,this.course=c.course,this.mode=c.mode;const s={description:["",i.m.required],category:["",i.m.required],longDescription:["",i.m.required],promo:["",[]]};"update"===this.mode?(this.form=this.fb.group(s),this.form.patchValue(Object.assign({},c.course))):"create"===this.mode&&(this.form=this.fb.group(Object.assign(Object.assign({},s),{url:["",i.m.required],iconUrl:["",i.m.required]})))}onClose(){this.dialogRef.close()}onSave(){const e=Object.assign(Object.assign({},this.course),this.form.value);"update"===this.mode?(this.coursesService.update(e),this.dialogRef.close()):"create"===this.mode&&this.coursesService.add(e).subscribe(e=>{console.log("New Course",e),this.dialogRef.close()})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(i.c),l.Ob(a.g),l.Ob(a.a),l.Ob(u))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-edit-course-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"formGroup"],["matInput","","placeholder","Course Description","formControlName","description"],["placeholder","Select category","formControlName","category"],["value","BEGINNER"],["value","INTERMEDIATE"],["value","ADVANCED"],["formControlName","promo"],["matInput","","placeholder","Description","formControlName","longDescription"],["matInput","","placeholder","Course Url","formControlName","url"],["matInput","","placeholder","Course Icon Url","formControlName","iconUrl"]],template:function(e,t){1&e&&(l.Ub(0,"h2",0),l.xc(1),l.Tb(),l.Ub(2,"mat-dialog-content"),l.wc(3,v,18,2,"ng-container",1),l.Tb(),l.Ub(4,"mat-dialog-actions"),l.Ub(5,"button",2),l.cc("click",(function(){return t.onClose()})),l.xc(6," Close "),l.Tb(),l.Ub(7,"button",3),l.cc("click",(function(){return t.onSave()})),l.gc(8,"async"),l.xc(9," Save "),l.Tb(),l.Tb()),2&e&&(l.Cb(1),l.yc(t.dialogTitle),l.Cb(2),l.kc("ngIf",t.form),l.Cb(4),l.kc("disabled",!(null!=t.form&&t.form.valid)||l.hc(8,3,t.loading$)))},directives:[a.h,a.e,o.l,a.c,d.a,i.j,i.e,m.b,p.a,i.b,i.i,i.d,f.a,h.g,g.a],pipes:[o.b],styles:[".mat-form-field[_ngcontent-%COMP%]{display:block}textarea[_ngcontent-%COMP%]{height:100px;resize:vertical}"]}),e})();var T=c("NFeN"),y=c("wZkO"),w=c("Wp6s");const k=function(e){return["/courses",e]};function x(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-card",1),l.Ub(1,"mat-card-header"),l.Ub(2,"mat-card-title"),l.xc(3),l.Tb(),l.Tb(),l.Pb(4,"img",2),l.Ub(5,"mat-card-content"),l.Ub(6,"p"),l.xc(7),l.Tb(),l.Tb(),l.Ub(8,"mat-card-actions",3),l.Ub(9,"button",4),l.xc(10," VIEW "),l.Tb(),l.Ub(11,"button",5),l.Ub(12,"mat-icon",6),l.cc("click",(function(){l.qc(e);const c=t.$implicit;return l.fc().editCourse(c)})),l.xc(13,"edit"),l.Tb(),l.Tb(),l.Ub(14,"button",7),l.Ub(15,"mat-icon",6),l.cc("click",(function(){l.qc(e);const c=t.$implicit;return l.fc().onDeleteCourse(c)})),l.xc(16,"delete"),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit;l.Cb(3),l.yc(e.description),l.Cb(1),l.kc("src",e.iconUrl,l.rc),l.Cb(3),l.yc(e.longDescription),l.Cb(2),l.kc("routerLink",l.mc(4,k,e.url))}}let O=(()=>{class e{constructor(e,t){this.dialog=e,this.courseService=t,this.courseChanged=new l.o}ngOnInit(){}editCourse(e){const t=Object(n.a)();t.data={dialogTitle:"Edit Course",course:e,mode:"update"},this.dialog.open(U,t).afterClosed().subscribe(()=>this.courseChanged.emit())}onDeleteCourse(e){this.courseService.delete(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(a.b),l.Ob(u))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-courses-card-list"]],inputs:{courses:"courses"},outputs:{courseChanged:"courseChanged"},decls:1,vars:1,consts:[["class","course-card mat-elevation-z5 my-4 w-50 mx-auto",4,"ngFor","ngForOf"],[1,"course-card","mat-elevation-z5","my-4","w-50","mx-auto"],["mat-card-image","",3,"src"],[1,"course-actions"],["mat-raised-button","","color","primary",1,"mr-2",3,"routerLink"],["mat-mini-fab","","color","accent",1,"mr-2"],[1,"add-course-btn",3,"click"],["mat-mini-fab","","color","warn"]],template:function(e,t){1&e&&l.wc(0,x,17,6,"mat-card",0),2&e&&l.kc("ngForOf",t.courses)},directives:[o.k,w.a,w.d,w.g,w.e,w.c,w.b,d.a,s.g,T.a],styles:[""]}),e})(),S=(()=>{class e{constructor(e,t){this.dialog=e,this.coursesService=t}ngOnInit(){this.beginnerCourses$=this.coursesService.entities$.pipe(Object(r.a)(e=>e.filter(e=>"BEGINNER"===e.category))),this.advancedCourses$=this.coursesService.entities$.pipe(Object(r.a)(e=>e.filter(e=>"ADVANCED"===e.category))),this.promoTotal$=this.coursesService.entities$.pipe(Object(r.a)(e=>e.filter(e=>e.promo).length))}onAddCourse(){const e=Object(n.a)();e.data={dialogTitle:"Create Course",mode:"create"},this.dialog.open(U,e)}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(a.b),l.Ob(u))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-courses"]],decls:18,vars:9,consts:[[1,"counters"],[1,"courses-panel"],[1,"header","d-flex","justify-content-between"],[1,"title"],["mat-mini-fab",""],[1,"add-course-btn",3,"click"],["label","Beginners"],[3,"courses"],["label","Advanced"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"p"),l.xc(2),l.gc(3,"async"),l.Tb(),l.Tb(),l.Ub(4,"div",1),l.Ub(5,"div",2),l.Ub(6,"h2",3),l.xc(7,"All Courses"),l.Tb(),l.Ub(8,"button",4),l.Ub(9,"mat-icon",5),l.cc("click",(function(){return t.onAddCourse()})),l.xc(10,"add"),l.Tb(),l.Tb(),l.Tb(),l.Ub(11,"mat-tab-group"),l.Ub(12,"mat-tab",6),l.Pb(13,"app-courses-card-list",7),l.gc(14,"async"),l.Tb(),l.Ub(15,"mat-tab",8),l.Pb(16,"app-courses-card-list",7),l.gc(17,"async"),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Cb(2),l.zc("In Promo: ",l.hc(3,3,t.promoTotal$),""),l.Cb(11),l.kc("courses",l.hc(14,5,t.beginnerCourses$)),l.Cb(3),l.kc("courses",l.hc(17,7,t.advancedCourses$)))},directives:[d.a,T.a,y.b,y.a,O],pipes:[o.b],styles:[""],changeDetection:0}),e})();var I=c("vkgz"),D=c("pLZG"),j=c("SxV6");let $=(()=>{class e{constructor(e){this.coursesService=e}resolve(e,t){return this.coursesService.loaded$.pipe(Object(I.a)(e=>{e||this.coursesService.getAll()}),Object(D.a)(e=>!!e),Object(j.a)())}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(u))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac}),e})();var N=c("zp1y"),P=c("3E0/");let R=(()=>{class e extends b.b{constructor(e){super("Lesson",e)}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(b.c))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac}),e})();var q=c("+0xr"),L=c("Xa2L");function A(e,t){1&e&&(l.Ub(0,"div",15),l.Pb(1,"mat-spinner"),l.Tb())}function E(e,t){1&e&&(l.Ub(0,"mat-header-cell"),l.xc(1,"#"),l.Tb())}function M(e,t){if(1&e&&(l.Ub(0,"mat-cell"),l.xc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.yc(e.seqNo)}}function z(e,t){1&e&&(l.Ub(0,"mat-header-cell"),l.xc(1,"Description"),l.Tb())}function G(e,t){if(1&e&&(l.Ub(0,"mat-cell",16),l.xc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.yc(e.description)}}function V(e,t){1&e&&(l.Ub(0,"mat-header-cell"),l.xc(1,"Duration"),l.Tb())}function Y(e,t){if(1&e&&(l.Ub(0,"mat-cell",17),l.xc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.yc(e.duration)}}function F(e,t){1&e&&l.Pb(0,"mat-header-row")}function K(e,t){1&e&&l.Pb(0,"mat-row")}function B(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",1),l.Ub(1,"h2"),l.xc(2),l.Tb(),l.Pb(3,"img",2),l.wc(4,A,2,0,"div",3),l.gc(5,"async"),l.Ub(6,"mat-table",4),l.gc(7,"async"),l.Sb(8,5),l.wc(9,E,2,0,"mat-header-cell",6),l.wc(10,M,2,1,"mat-cell",7),l.Rb(),l.Sb(11,8),l.wc(12,z,2,0,"mat-header-cell",6),l.wc(13,G,2,1,"mat-cell",9),l.Rb(),l.Sb(14,10),l.wc(15,V,2,0,"mat-header-cell",6),l.wc(16,Y,2,1,"mat-cell",11),l.Rb(),l.wc(17,F,1,0,"mat-header-row",12),l.wc(18,K,1,0,"mat-row",13),l.Tb(),l.Ub(19,"button",14),l.cc("click",(function(){l.qc(e);const c=t.ngIf;return l.fc().loadLessonsPage(c)})),l.xc(20," Load More "),l.Tb(),l.Tb()}if(2&e){const e=t.ngIf,c=l.fc();l.Cb(2),l.yc(null==e?null:e.description),l.Cb(1),l.kc("src",null==e?null:e.iconUrl,l.rc),l.Cb(1),l.kc("ngIf",l.hc(5,6,c.loading$)),l.Cb(2),l.kc("dataSource",l.hc(7,8,c.lessons$)),l.Cb(11),l.kc("matHeaderRowDef",c.displayedColumns),l.Cb(1),l.kc("matRowDefColumns",c.displayedColumns)}}const H=[{path:"",component:S,resolve:{courses:$}},{path:":courseUrl",component:(()=>{class e{constructor(e,t,c){this.coursesService=e,this.lessonsService=t,this.route=c,this.displayedColumns=["seqNo","description","duration"],this.nextPage=0}ngOnInit(){const e=this.route.snapshot.paramMap.get("courseUrl");this.course$=this.coursesService.entities$.pipe(Object(r.a)(t=>t.find(t=>t.url===e))),this.lessons$=this.lessonsService.entities$.pipe(Object(N.a)(this.course$),Object(I.a)(([e,t])=>{0===this.nextPage&&this.loadLessonsPage(t)}),Object(r.a)(([e,t])=>e.filter(e=>e.courseId===t.id))),this.loading$=this.lessonsService.loading$.pipe(Object(P.a)(0))}loadLessonsPage(e){this.lessonsService.getWithQuery({courseId:e.id.toString(),pageNumber:this.nextPage.toString(),pageSize:"3"}),this.nextPage+=1}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(u),l.Ob(R),l.Ob(s.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-course"]],decls:4,vars:3,consts:[["class","course",4,"ngIf"],[1,"course"],[1,"course-thumbnail","mat-elevation-z8",3,"src"],["class","spinner-container",4,"ngIf"],[1,"lessons-table","mat-elevation-z8",3,"dataSource"],["matColumnDef","seqNo"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","description"],["class","description-cell",4,"matCellDef"],["matColumnDef","duration"],["class","duration-cell",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","accent",1,"bottom-toolbar",3,"click"],[1,"spinner-container"],[1,"description-cell"],[1,"duration-cell"]],template:function(e,t){1&e&&(l.Ub(0,"p"),l.xc(1,"course works!"),l.Tb(),l.wc(2,B,21,10,"div",0),l.gc(3,"async")),2&e&&(l.Cb(2),l.kc("ngIf",l.hc(3,1,t.course$)))},directives:[o.l,q.j,q.c,q.e,q.b,q.g,q.i,d.a,L.b,q.d,q.a,q.f,q.h],pipes:[o.b],styles:[""],changeDetection:0}),e})(),resolve:{courses:$}}];let J=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[s.j.forChild(H)],s.j]}),e})();var W=c("tk/3");let X=(()=>{class e extends b.a{constructor(e,t){super("Course",e,t)}getAll(){return this.http.get("/api/courses").pipe(Object(r.a)(e=>e.payload))}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(W.a),l.Yb(b.g))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac}),e})();var Z=c("5dmV");const _={Course:{entityDispatcherOptions:{optimisticUpdate:!0}},Lesson:{sortComparer:function(e,t){const c=e.courseId-t.courseId;return c>0?1:c<0?-1:e.seqNo-t.seqNo}}};let Q=(()=>{class e{constructor(e,t,c){this.eds=e,this.entityDataService=t,this.coursesDataService=c,e.registerMetadataMap(_),t.registerService("Course",c)}}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)(l.Yb(b.f),l.Yb(b.e),l.Yb(X))},providers:[u,$,X,R],imports:[[o.c,J,Z.a,i.l]]}),e})()}}]);